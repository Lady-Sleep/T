{"name":"T","tagline":"测试文件","body":"<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>图片循环展示</title>\r\n<style>\r\nbody{background:#efefef;}\r\n#main{min-width:500px;padding:20px;margin:20px auto;background:#fff;border:1px solid #ccc;}\r\n.showit{text-decoration:none;}\r\n.showit img{width:100px;height:50px;border:1px solid #000;}\r\n.on img{border-color:#f00;}\r\n#showbox{position:absolute;top:0;left:0;width:100%;height:100%;background:#000;text-align:center;}\r\n#showbox img{max-width:500;margin-top:100px;box-shadow:0 0 20px #fff;border-radius:10px;}\r\n.txt{width:40px;border:1px solid #000;text-align:center;}\r\n</style>\r\n</head>\r\n\r\n<body>\r\n\t<div id=\"main\">\r\n\t\t<h2>图片循环展示</h2>\r\n\t\t<a href=\"img/1.jpg\" class=\"showit\"><img src=\"img/1.jpg\"></a>\r\n\t\t<a href=\"img/2.jpg\" class=\"showit\"><img src=\"img/2.jpg\"></a>\r\n\t\t<a href=\"img/3.jpg\" class=\"showit\"><img src=\"img/3.jpg\"></a>\r\n\t\t<a href=\"img/4.jpg\" class=\"showit\"><img src=\"img/4.jpg\"></a>\r\n\t\t<a href=\"img/5.jpg\" class=\"showit\"><img src=\"img/5.jpg\"></a>\r\n\t</div>\r\n\t<input type=\"button\" value=\"clear\" id=\"btnParseState\">\r\n<table id=\"grid-table\">\r\n\t<tbody></tbody>\r\n</table>\r\n\t<script src=\"jquery-1.11.3.min.js\"></script>\r\n\t<script>\r\n\tvar i = 1;\r\n\tvar html = '<tr>' +\r\n            '<td class=\"tc t-index\">111</td>' +\r\n            '<td class=\"tc t-name\">2222</td>' +\r\n            '<td class=\"set-input\">' + '<input type=\"text\" class=\"val-input\">' +\r\n            '<input type=\"button\" value=\"执行\" style=\"float:right;width:42%;padding:3px 0;border:1px solid #000;\">' + '</td>' +\r\n            '<td class=\"info t-info\">4444</td>' +\r\n            '</tr>';\r\n\tfor(i;i<8;i++){\r\n\t\t$(\"#grid-table tbody\").append(html);\r\n  }\r\n\r\n  $(\"#btnParseState\").click(function(){\r\n  \t$(\".grid-table tbody tr\").remove();\r\n  });\r\n\r\n  var el = $(\".val-input\");\r\n  $.each(el,function(i){\r\n      $(this).on(\"blur\",blurFun);\r\n  });\r\n  function blurFun(){\r\n  \tvar valText = $(this).val();\r\n    checkEditField(valText);\r\n    return false;\r\n  }\r\n  function checkEditField(valText){\r\n    alert(valText);\r\n  }\r\n\t</script>\r\n\t<script>\r\n\t$(function(){\r\n\t\t$(\".showit\").click(function(event){\r\n\t\t\t$(this).addClass(\"on\").siblings(\"a\").removeClass(\"on\");\r\n\r\n\t\t\tvar largeImgUrl = $(this).attr(\"href\");\r\n\t\t\tvar boxEl = $(\"#showbox\");\r\n\r\n\t\t\tif(!boxEl.length){\r\n\t\t\t\tboxEl = $(\"<div>\",{id:\"showbox\",html:\"<img/>\"}).appendTo(document.body);\r\n\t\t\t}\r\n\r\n\t\t\tboxEl.find(\"img\").attr(\"src\",largeImgUrl);\r\n\t\t\tboxEl.show();\r\n\r\n\t\t\tevent.preventDefault();\r\n\t\t});\r\n\r\n\t\tvar cachedImgUrls;\t//使用数组来缓存图片\r\n\r\n\t\tfunction cacheImgUrls(){\r\n\t\t\tif(!cachedImgUrls){\r\n\t\t\t\t//map函数将一个jQuery对象映射为数据\r\n\t\t\t\tcachedImgUrls = $(\".showit\").map(function(){\r\n\t\t\t\t\t//[\"img/1.jpg\", \"img/2.jpg\", \"img/3.jpg\", \"img/4.jpg\", \"img/5.jpg\"\"]\r\n\t\t\t\t\treturn $(this).attr(\"href\");\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction getNextImgUrl(imgUrl){\r\n\t\t\tcacheImgUrls();\r\n\r\n\t\t\t//inArray函数查找某项元素在数组中的索引，如果返回值小于零，则数组中不存在此元素\r\n\t\t\tvar imgUrlIndex = $.inArray(imgUrl,cachedImgUrls);\r\n\r\n\t\t\tif(imgUrlIndex >= 0){\r\n\t\t\t\timgUrlIndex++;\r\n\r\n\t\t\t\tif(imgUrlIndex >= cachedImgUrls.length){\r\n\t\t\t\t\timgUrlIndex = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn cachedImgUrls[imgUrlIndex];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction getPrevImgUrl(imgUrl){\r\n\t\t\tcacheImgUrls();\r\n\r\n\t\t\t//inArray函数查找某项元素在数组中的索引，如果返回值小于零，则数组中不存在此元素\r\n\t\t\tvar imgUrlIndex = $.inArray(imgUrl,cachedImgUrls);\r\n\r\n\t\t\tif(imgUrlIndex >= 0){\r\n\t\t\t\timgUrlIndex--;\r\n\r\n\t\t\t\tif(imgUrlIndex < 0){\r\n\t\t\t\t\timgUrlIndex = cachedImgUrls.length - 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn cachedImgUrls[imgUrlIndex];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//on(event,[selector],[data],fn)  即使在注册事件时节点不存在也一样有效\r\n\t\t//给body绑定click事件，当它到达#showbox元素，就会触发此事件\r\n\t\t$(document.body).on(\"click\",\"#showbox\",function(event){\r\n\t\t\tvar targetEl = $(event.target);\r\n\r\n\t\t\tif(targetEl.is(\"img\")){\r\n\t\t\t\tvar imgLeft = targetEl.offset().left;\r\n\t\t\t\tvar imgHalfX = imgLeft + targetEl.outerWidth() / 2;\r\n\t\t\t\tconsole.log(imgHalfX);\r\n\t\t\t\tvar imgUrl = targetEl.attr(\"src\");\r\n\t\t\t\tvar nextImgUrl;\r\n\r\n\t\t\t\tif(event.pageX > imgHalfX){//表示坐标是在右边\r\n\t\t\t\t\tnextImgUrl = getNextImgUrl(imgUrl);\r\n\t\t\t\t}else{//表示坐标是在左边\r\n\t\t\t\t\tnextImgUrl = getPrevImgUrl(imgUrl);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(nextImgUrl){\r\n\t\t\t\t\ttargetEl.attr(\"src\",nextImgUrl);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t$(this).hide();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n\t</script>\r\n</body>\r\n</html>","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}